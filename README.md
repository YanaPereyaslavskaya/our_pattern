# our-pattern
Строитель — это порождающий паттерн проектирования, который позволяет создавать сложные объекты пошагово. Строитель даёт возможность использовать один и тот же код строительства для получения разных представлений объектов.
Мы хотим создать объект Дом. Для построения нам нужны 4 стены, установить двери, вставить пару окон и положить крышу. Но при добавлении новых атрибутов, у нас появится необходимость расширять класс Дом, что может быть не очень удобным. Проблема такого подхода — это громадное количество классов, которые вам придётся создать.
Решением проблемы может быть создание конструктора Дома, принимающий параметры для контроля над создаваемым продуктом. Тем не менее, здесь появляется другая проблема: большая часть параметров для конкретного случая будет нам не нужна.
Благодаря паттерну Строитель мы можем разбить процесс конструирования объекта на отдельные шаги (например, построитьСтены, вставитьДвери и другие)
Также для разных задач используются несколько классов Строителей, выполняющих одни и те же шаги по-разному. Используя этих строителей в одном и том же строительном процессе, вы сможете получать на выходе различные объекты.
Так как для строительства используются одни и те же методы (построение стен, дверей), то их можно вынести в отдельный класс – Директор. Директор полезен, если у вас есть несколько способов конструирования продуктов, отличающихся порядком и наличием шагов конструирования.
*картинка*
1. Интерфейс строителя объявляет шаги конструирования продуктов, общие для всех видов строителей.
2. Конкретные строители реализуют строительные шаги, каждый по-своему. Конкретные строители могут производить разнородные объекты, не имеющие общего интерфейса.
3. Продукт — создаваемый объект. Продукты, сделанные разными строителями, не обязаны иметь общий интерфейс.
4. Директор определяет порядок вызова строительных шагов для производства той или иной конфигурации продуктов.
5. Обычно Клиент подаёт в конструктор директора уже готовый объект-строитель, и в дальнейшем данный директор использует только его. Но возможен и другой вариант, когда клиент передаёт строителя через параметр строительного метода директора. В этом случае можно каждый раз применять разных строителей для производства различных представлений объектов.
Паттерн Строитель позволяет собирать объекты пошагово, вызывая только те шаги, которые вам нужны. А значит, больше не нужно пытаться «запихнуть» в конструктор все возможные опции продукта.
Строитель можно применить, если создание нескольких представлений объекта состоит из одинаковых этапов, которые отличаются в деталях.
Интерфейс строителей определит все возможные этапы конструирования. Каждому представлению будет соответствовать собственный класс-строитель. А порядок этапов строительства будет задавать класс-директор.
Строитель конструирует объекты пошагово, а не за один проход. Более того, шаги строительства можно выполнять рекурсивно. А без этого не построить древовидную структуру, вроде Компоновщика.
Заметьте, что Строитель не позволяет посторонним объектам иметь доступ к конструируемому объекту, пока тот не будет полностью готов. Это предохраняет клиентский код от получения незаконченных «битых» объектов.
Шаги реализации:
1.Убедитесь в том, что создание разных представлений объекта можно свести к общим шагам.
2.Опишите эти шаги в общем интерфейсе строителей.
3.Для каждого из представлений объекта-продукта создайте по одному классу-строителю и реализуйте их методы строительства.
Не забудьте про метод получения результата. Обычно конкретные строители определяют собственные методы получения результата строительства. Вы не можете описать эти методы в интерфейсе строителей, поскольку продукты не обязательно должны иметь общий базовый класс или интерфейс. Но вы всегда сможете добавить метод получения результата в общий интерфейс, если ваши строители производят однородные продукты с общим предком.
4.Подумайте о создании класса директора. Его методы будут создавать различные конфигурации продуктов, вызывая разные шаги одного и того же строителя.
5.Клиентский код должен будет создавать и объекты строителей, и объект директора. Перед началом строительства клиент должен связать определённого строителя с директором. Это можно сделать либо через конструктор, либо через сеттер, либо подав строителя напрямую в строительный метод директора.
6.Результат строительства можно вернуть из директора, но только если метод возврата продукта удалось поместить в общий интерфейс строителей. Иначе вы жёстко привяжете директора к конкретным классам строителей.
Преимущества:
1. Позволяет создавать продукты пошагово.
2. Позволяет использовать один и тот же код для создания различных продуктов.
3. Изолирует сложный код сборки продукта от его основной бизнес-логики.
Недостатки:
1. Усложняет код программы из-за введения дополнительных классов.
2. Клиент будет привязан к конкретным классам строителей, так как в интерфейсе директора может не быть метода получения результата.